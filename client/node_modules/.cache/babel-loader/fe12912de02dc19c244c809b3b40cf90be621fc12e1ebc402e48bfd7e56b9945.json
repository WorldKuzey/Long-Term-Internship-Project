{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const UseContext=/*#__PURE__*/createContext();export const UseProvider=_ref=>{let{children}=_ref;const[selectedQuery,setSelectedQuery]=useState(()=>{const selectedRecNo=localStorage.getItem(\"selectedRecNo\");return selectedRecNo?localStorage.getItem(\"report_\".concat(selectedRecNo,\"_selectedQuery\")):null;});const[selectedReportTitle,setSelectedReportTitle]=useState(()=>{const selectedRecNo=localStorage.getItem(\"selectedRecNo\");return selectedRecNo?localStorage.getItem(\"report_\".concat(selectedRecNo,\"_selectedReportTitle\")):null;});const[selectedRecNo,setSelectedRecNo]=useState(localStorage.getItem(\"selectedRecNo\"));useEffect(()=>{const handleStorageChange=event=>{const{key}=event;if(key.startsWith(\"report_\")){setSelectedRecNo(localStorage.getItem(\"selectedRecNo\"));setSelectedQuery(localStorage.getItem(\"report_\".concat(selectedRecNo,\"_selectedQuery\")));setSelectedReportTitle(localStorage.getItem(\"report_\".concat(selectedRecNo,\"_selectedReportTitle\")));}};// LocalStorage'daki değişiklikleri dinle\nwindow.addEventListener(\"storage\",handleStorageChange);// Component kaldırıldığında listener'ı temizle\nreturn()=>{window.removeEventListener(\"storage\",handleStorageChange);};},[]);return/*#__PURE__*/_jsx(UseContext.Provider,{value:{selectedQuery,setSelectedQuery,selectedReportTitle,setSelectedReportTitle,selectedRecNo,setSelectedRecNo//selectedInitRun,\n//setSelectedInitRun,\n},children:children});};export const useQuery=()=>useContext(UseContext);","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","UseContext","UseProvider","_ref","children","selectedQuery","setSelectedQuery","selectedRecNo","localStorage","getItem","concat","selectedReportTitle","setSelectedReportTitle","setSelectedRecNo","handleStorageChange","event","key","startsWith","window","addEventListener","removeEventListener","Provider","value","useQuery"],"sources":["C:/Internship Project/client/src/pages/HomePage/useContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nconst UseContext = createContext();\r\n\r\nexport const UseProvider = ({ children }) => {\r\n  const [selectedQuery, setSelectedQuery] = useState(() => {\r\n    const selectedRecNo = localStorage.getItem(\"selectedRecNo\");\r\n    return selectedRecNo\r\n      ? localStorage.getItem(`report_${selectedRecNo}_selectedQuery`)\r\n      : null;\r\n  });\r\n  const [selectedReportTitle, setSelectedReportTitle] = useState(() => {\r\n    const selectedRecNo = localStorage.getItem(\"selectedRecNo\");\r\n    return selectedRecNo\r\n      ? localStorage.getItem(`report_${selectedRecNo}_selectedReportTitle`)\r\n      : null;\r\n  });\r\n  const [selectedRecNo, setSelectedRecNo] = useState(\r\n    localStorage.getItem(\"selectedRecNo\")\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleStorageChange = (event) => {\r\n      const { key } = event;\r\n      if (key.startsWith(\"report_\")) {\r\n        setSelectedRecNo(localStorage.getItem(\"selectedRecNo\"));\r\n        setSelectedQuery(\r\n          localStorage.getItem(`report_${selectedRecNo}_selectedQuery`)\r\n        );\r\n        setSelectedReportTitle(\r\n          localStorage.getItem(`report_${selectedRecNo}_selectedReportTitle`)\r\n        );\r\n      }\r\n    };\r\n\r\n    // LocalStorage'daki değişiklikleri dinle\r\n    window.addEventListener(\"storage\", handleStorageChange);\r\n\r\n    // Component kaldırıldığında listener'ı temizle\r\n    return () => {\r\n      window.removeEventListener(\"storage\", handleStorageChange);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <UseContext.Provider\r\n      value={{\r\n        selectedQuery,\r\n        setSelectedQuery,\r\n        selectedReportTitle,\r\n        setSelectedReportTitle,\r\n        selectedRecNo,\r\n        setSelectedRecNo,\r\n        //selectedInitRun,\r\n        //setSelectedInitRun,\r\n      }}\r\n    >\r\n      {children}\r\n    </UseContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useQuery = () => useContext(UseContext);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,UAAU,cAAGN,aAAa,CAAC,CAAC,CAElC,MAAO,MAAM,CAAAO,WAAW,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACtC,KAAM,CAACE,aAAa,CAAEC,gBAAgB,CAAC,CAAGT,QAAQ,CAAC,IAAM,CACvD,KAAM,CAAAU,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAC3D,MAAO,CAAAF,aAAa,CAChBC,YAAY,CAACC,OAAO,WAAAC,MAAA,CAAWH,aAAa,kBAAgB,CAAC,CAC7D,IAAI,CACV,CAAC,CAAC,CACF,KAAM,CAACI,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGf,QAAQ,CAAC,IAAM,CACnE,KAAM,CAAAU,aAAa,CAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAC3D,MAAO,CAAAF,aAAa,CAChBC,YAAY,CAACC,OAAO,WAAAC,MAAA,CAAWH,aAAa,wBAAsB,CAAC,CACnE,IAAI,CACV,CAAC,CAAC,CACF,KAAM,CAACA,aAAa,CAAEM,gBAAgB,CAAC,CAAGhB,QAAQ,CAChDW,YAAY,CAACC,OAAO,CAAC,eAAe,CACtC,CAAC,CAEDX,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,mBAAmB,CAAIC,KAAK,EAAK,CACrC,KAAM,CAAEC,GAAI,CAAC,CAAGD,KAAK,CACrB,GAAIC,GAAG,CAACC,UAAU,CAAC,SAAS,CAAC,CAAE,CAC7BJ,gBAAgB,CAACL,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,CACvDH,gBAAgB,CACdE,YAAY,CAACC,OAAO,WAAAC,MAAA,CAAWH,aAAa,kBAAgB,CAC9D,CAAC,CACDK,sBAAsB,CACpBJ,YAAY,CAACC,OAAO,WAAAC,MAAA,CAAWH,aAAa,wBAAsB,CACpE,CAAC,CACH,CACF,CAAC,CAED;AACAW,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEL,mBAAmB,CAAC,CAEvD;AACA,MAAO,IAAM,CACXI,MAAM,CAACE,mBAAmB,CAAC,SAAS,CAAEN,mBAAmB,CAAC,CAC5D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEd,IAAA,CAACC,UAAU,CAACoB,QAAQ,EAClBC,KAAK,CAAE,CACLjB,aAAa,CACbC,gBAAgB,CAChBK,mBAAmB,CACnBC,sBAAsB,CACtBL,aAAa,CACbM,gBACA;AACA;AACF,CAAE,CAAAT,QAAA,CAEDA,QAAQ,CACU,CAAC,CAE1B,CAAC,CAED,MAAO,MAAM,CAAAmB,QAAQ,CAAGA,CAAA,GAAM3B,UAAU,CAACK,UAAU,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}