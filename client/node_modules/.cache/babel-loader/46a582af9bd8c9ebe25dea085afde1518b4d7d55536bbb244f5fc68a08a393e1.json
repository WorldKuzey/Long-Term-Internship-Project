{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{useQuery}from\"./useContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TreeView(){const[recNo,setRecNo]=useState([]);//TODO REPORT PAGE SAYFASINA AKTARILACAK PARAMETRİK OLARAK\nconst[reportTitle,setReportTitle]=useState([]);const[menuName,setMenuName]=useState([]);// TODO REPORT PAGE SAYFASINA AKTARILACAK SAYFANIN BAŞLIĞI  OLARAK\nconst[query,setQuery]=useState([]);// TODO REPORT PAGE SAYFASINA AKATARIALACAK SORGU OLARAK  OLARAK\nconst[initRun,setInitRun]=useState([]);// TODO REPORT PAGE SAYFASINA AKATARILACAK DEĞER  OLARAK\nconst{setSelectedReportTitle,setSelectedQuery}=useQuery();// AKTARILACAK VERİLER USEQUERY SAYESİNDE AKTARILIR\nuseEffect(()=>{async function fetchMenuItems(){try{const response=await axios.get(\"/tree-view\");//BOŞ ARRAYLER İÇLERİNİ RAPOR TANIMLARININ DEĞERLERİ İLE DOLDURULMAK İÇİN OLUŞTURULDU\nconst menuArray=[];const queryArray=[];const reportTitleArray=[];const recNoArray=[];const initRunArray=[];let iteraty,recNo,menuAdi,raporBaslik,selectSorgusu,baslangictaRaporCalissinMi;const tabloTanimlariDegerleri=Object.values(response.data);for(let i=0;i<tabloTanimlariDegerleri.length;i++){//\niteraty=response.data[i];recNo=Object.values(iteraty)[0];menuAdi=Object.values(iteraty)[2];raporBaslik=Object.values(iteraty)[5];selectSorgusu=Object.values(iteraty)[6];baslangictaRaporCalissinMi=Object.values(iteraty)[7];menuArray.push(menuAdi);//MENU ADI\nqueryArray.push(selectSorgusu);//SELECT SORGUSU\nreportTitleArray.push(raporBaslik);//RAPOR BAŞLIK\nrecNoArray.push(recNo);// RECNO\ninitRunArray.push(baslangictaRaporCalissinMi);// BAŞLANGIÇTA RAPOR ÇALIŞSIN MI\n}setMenuName(menuArray);//bu artık menuName\nsetQuery(queryArray);// bu artık query\nsetInitRun(initRunArray);// bu artık initRun\nsetRecNo(recNoArray);// bu artık\nsetReportTitle(reportTitleArray);}catch(error){console.error(\"Failed to fetch menu items: \",error);}}fetchMenuItems();},[]);//BUTONA TIKLANINCA BU VERİLER DİĞER SAYFAYA POST EDİLİYOR\nconst handleClick=async index=>{//TODO SELECTED LARI SEÇİP POST ATARKEN ONLARI ARRAY HALİNDE ATMAK DAHA MANTIKLI İLK OLARAK QUERY'Yİ YAPACAĞIM İÇİN İŞLERİN HIZLI GİTMESİ BAKIMINDAN BEN VARİABLE KULLANICAM ŞİMDİLİK AMAÇLADIĞIM ŞEY BAŞARILI OLURSA BU KISIM ARRAY ŞEKLİNDE POST EDİLMELİ Kİ KOD KALABALIĞINDAN KURTULALALIM\nconst selectedReportTitle=reportTitle[index];setSelectedReportTitle(selectedReportTitle);const selectedQuery=query[index];//BUG BURADA AKTARMAMIZ GEREKEN RECNO GİBİ DEĞERLERİ AKTARMADIK HALA REC NO KARŞI TARAFTA BİZE ÇOK İŞE YARICAK KAÇ KRİTER AÇACAĞIMIZ İLE İLGİLİ\nsetSelectedQuery(selectedQuery);//const selectedQuery = query[index];\ntry{await axios.post(\"/postQuery\",{selectedQuery});}catch(error){console.error(\"Hata\",error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RAPORLAR\"}),/*#__PURE__*/_jsx(\"ul\",{children:menuName.map((menuItem,index)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/report-page\"},onClick:()=>handleClick(index),children:menuItem})},index))})]});}export default TreeView;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useQuery","jsx","_jsx","jsxs","_jsxs","TreeView","recNo","setRecNo","reportTitle","setReportTitle","menuName","setMenuName","query","setQuery","initRun","setInitRun","setSelectedReportTitle","setSelectedQuery","fetchMenuItems","response","get","menuArray","queryArray","reportTitleArray","recNoArray","initRunArray","iteraty","menuAdi","raporBaslik","selectSorgusu","baslangictaRaporCalissinMi","tabloTanimlariDegerleri","Object","values","data","i","length","push","error","console","handleClick","index","selectedReportTitle","selectedQuery","post","children","map","menuItem","to","pathname","onClick"],"sources":["C:/Internship Project/client/src/pages/HomePage/treeView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useQuery } from \"./useContext\";\r\n\r\nfunction TreeView() {\r\n  const [recNo, setRecNo] = useState([]); //TODO REPORT PAGE SAYFASINA AKTARILACAK PARAMETRİK OLARAK\r\n  const [reportTitle, setReportTitle] = useState([]);\r\n  const [menuName, setMenuName] = useState([]); // TODO REPORT PAGE SAYFASINA AKTARILACAK SAYFANIN BAŞLIĞI  OLARAK\r\n  const [query, setQuery] = useState([]); // TODO REPORT PAGE SAYFASINA AKATARIALACAK SORGU OLARAK  OLARAK\r\n  const [initRun, setInitRun] = useState([]); // TODO REPORT PAGE SAYFASINA AKATARILACAK DEĞER  OLARAK\r\n  const { setSelectedReportTitle, setSelectedQuery } = useQuery(); // AKTARILACAK VERİLER USEQUERY SAYESİNDE AKTARILIR\r\n\r\n  useEffect(() => {\r\n    async function fetchMenuItems() {\r\n      try {\r\n        const response = await axios.get(\"/tree-view\");\r\n\r\n        //BOŞ ARRAYLER İÇLERİNİ RAPOR TANIMLARININ DEĞERLERİ İLE DOLDURULMAK İÇİN OLUŞTURULDU\r\n        const menuArray = [];\r\n        const queryArray = [];\r\n        const reportTitleArray = [];\r\n        const recNoArray = [];\r\n        const initRunArray = [];\r\n        let iteraty,\r\n          recNo,\r\n          menuAdi,\r\n          raporBaslik,\r\n          selectSorgusu,\r\n          baslangictaRaporCalissinMi;\r\n        const tabloTanimlariDegerleri = Object.values(response.data);\r\n\r\n        for (let i = 0; i < tabloTanimlariDegerleri.length; i++) {\r\n          //\r\n          iteraty = response.data[i];\r\n          recNo = Object.values(iteraty)[0];\r\n          menuAdi = Object.values(iteraty)[2];\r\n          raporBaslik = Object.values(iteraty)[5];\r\n          selectSorgusu = Object.values(iteraty)[6];\r\n          baslangictaRaporCalissinMi = Object.values(iteraty)[7];\r\n\r\n          menuArray.push(menuAdi); //MENU ADI\r\n          queryArray.push(selectSorgusu); //SELECT SORGUSU\r\n          reportTitleArray.push(raporBaslik); //RAPOR BAŞLIK\r\n          recNoArray.push(recNo); // RECNO\r\n          initRunArray.push(baslangictaRaporCalissinMi); // BAŞLANGIÇTA RAPOR ÇALIŞSIN MI\r\n        }\r\n        setMenuName(menuArray); //bu artık menuName\r\n        setQuery(queryArray); // bu artık query\r\n        setInitRun(initRunArray); // bu artık initRun\r\n        setRecNo(recNoArray); // bu artık\r\n        setReportTitle(reportTitleArray);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch menu items: \", error);\r\n      }\r\n    }\r\n    fetchMenuItems();\r\n  }, []);\r\n\r\n  //BUTONA TIKLANINCA BU VERİLER DİĞER SAYFAYA POST EDİLİYOR\r\n  const handleClick = async (index) => {\r\n    //TODO SELECTED LARI SEÇİP POST ATARKEN ONLARI ARRAY HALİNDE ATMAK DAHA MANTIKLI İLK OLARAK QUERY'Yİ YAPACAĞIM İÇİN İŞLERİN HIZLI GİTMESİ BAKIMINDAN BEN VARİABLE KULLANICAM ŞİMDİLİK AMAÇLADIĞIM ŞEY BAŞARILI OLURSA BU KISIM ARRAY ŞEKLİNDE POST EDİLMELİ Kİ KOD KALABALIĞINDAN KURTULALALIM\r\n    const selectedReportTitle = reportTitle[index];\r\n    setSelectedReportTitle(selectedReportTitle);\r\n    const selectedQuery = query[index]; //BUG BURADA AKTARMAMIZ GEREKEN RECNO GİBİ DEĞERLERİ AKTARMADIK HALA REC NO KARŞI TARAFTA BİZE ÇOK İŞE YARICAK KAÇ KRİTER AÇACAĞIMIZ İLE İLGİLİ\r\n    setSelectedQuery(selectedQuery);\r\n\r\n    //const selectedQuery = query[index];\r\n    try {\r\n      await axios.post(\"/postQuery\", {\r\n        selectedQuery,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Hata\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>RAPORLAR</h1>\r\n      <ul>\r\n        {menuName.map((menuItem, index) => (\r\n          <li key={index}>\r\n            <Link\r\n              to={{\r\n                pathname: \"/report-page\",\r\n              }}\r\n              onClick={() => handleClick(index)}\r\n            >\r\n              {menuItem}\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TreeView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}