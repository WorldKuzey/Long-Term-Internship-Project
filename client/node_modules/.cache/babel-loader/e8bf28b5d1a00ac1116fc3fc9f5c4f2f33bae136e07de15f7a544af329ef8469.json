{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{useQuery}from\"./QueryContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TreeView(){const[recNo,setRecNo]=useState([]);//TODO REPORT PAGE SAYFASINA AKTARILACAK PARAMETRİK OLARAK\nconst[reportTitle,setReportTitle]=useState([]);const[menuName,setMenuName]=useState([]);// TODO REPORT PAGE SAYFASINA AKTARILACAK SAYFANIN BAŞLIĞI  OLARAK\nconst[query,setQuery]=useState([]);// TODO REPORT PAGE SAYFASINA AKATARIALACAK SORGU OLARAK  OLARAK\nconst[initRun,setInitRun]=useState([]);// TODO REPORT PAGE SAYFASINA AKATARILACAK DEĞER  OLARAK\nconst{setSelectedReportTitle,setSelectedQuery}=useQuery();useEffect(()=>{async function fetchMenuItems(){try{const response=await axios.get(\"/tree-view\");const menuArray=[];const queryArray=[];const reportTitleArray=[];const recNoArray=[];const initRunArray=[];const tabloTanimlariValues=Object.values(response.data);for(let i=0;i<tabloTanimlariValues.length;i++){//\nlet iteraty=response.data[i];let menuAdi=Object.values(iteraty)[2];menuArray.push(menuAdi);//MENU ADI\nqueryArray.push(Object.values(response.data[i])[6]);//SELECT SORGUSU\nreportTitleArray.push(Object.values(response.data[i])[5]);//RAPOR BAŞLIK\nrecNoArray.push(Object.values(response.data[i])[0]);// RECNO\ninitRunArray.push(Object.values(response.data[i])[7]);// BAŞLANGIÇTA RAPOR ÇALIŞSIN MI\n}setMenuName(menuArray);setQuery(queryArray);setInitRun(initRunArray);setRecNo(recNoArray);setReportTitle(reportTitleArray);}catch(error){console.error(\"Failed to fetch menu items: \",error);}}fetchMenuItems();},[]);//BUTONA TIKLANINCA BU VERİLER DİĞER SAYFAYA POST EDİLİYOR\nconst handleClick=async index=>{//TODO SELECTED LARI SEÇİP POST ATARKEN ONLARI ARRAY HALİNDE ATMAK DAHA MANTIKLI İLK OLARAK QUERY'Yİ YAPACAĞIM İÇİN İŞLERİN HIZLI GİTMESİ BAKIMINDAN BEN VARİABLE KULLANICAM ŞİMDİLİK AMAÇLADIĞIM ŞEY BAŞARILI OLURSA BU KISIM ARRAY ŞEKLİNDE POST EDİLMELİ Kİ KOD KALABALIĞINDAN KURTULALALIM\nconst selectedReportTitle=reportTitle[index];setSelectedReportTitle(selectedReportTitle);const selectedQuery=query[index];//BUG BURADA AKTARMAMIZ GEREKEN RECNO GİBİ DEĞERLERİ AKTARMADIK HALA REC NO KARŞI TARAFTA BİZE ÇOK İŞE YARICAK KAÇ KRİTER AÇACAĞIMIZ İLE İLGİLİ\nsetSelectedQuery(selectedQuery);//const selectedQuery = query[index];\ntry{await axios.post(\"/postQuery\",{selectedQuery});}catch(error){console.error(\"Hata\",error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RAPORLAR\"}),/*#__PURE__*/_jsx(\"ul\",{children:menuName.map((menuItem,index)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/report-page\"},onClick:()=>handleClick(index),children:menuItem})},index))})]});}export default TreeView;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useQuery","jsx","_jsx","jsxs","_jsxs","TreeView","recNo","setRecNo","reportTitle","setReportTitle","menuName","setMenuName","query","setQuery","initRun","setInitRun","setSelectedReportTitle","setSelectedQuery","fetchMenuItems","response","get","menuArray","queryArray","reportTitleArray","recNoArray","initRunArray","tabloTanimlariValues","Object","values","data","i","length","iteraty","menuAdi","push","error","console","handleClick","index","selectedReportTitle","selectedQuery","post","children","map","menuItem","to","pathname","onClick"],"sources":["C:/Internship Project/client/src/pages/HomePage/treeView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useQuery } from \"./QueryContext\";\r\n\r\nfunction TreeView() {\r\n  const [recNo, setRecNo] = useState([]); //TODO REPORT PAGE SAYFASINA AKTARILACAK PARAMETRİK OLARAK\r\n  const [reportTitle, setReportTitle] = useState([]);\r\n  const [menuName, setMenuName] = useState([]); // TODO REPORT PAGE SAYFASINA AKTARILACAK SAYFANIN BAŞLIĞI  OLARAK\r\n  const [query, setQuery] = useState([]); // TODO REPORT PAGE SAYFASINA AKATARIALACAK SORGU OLARAK  OLARAK\r\n  const [initRun, setInitRun] = useState([]); // TODO REPORT PAGE SAYFASINA AKATARILACAK DEĞER  OLARAK\r\n  const { setSelectedReportTitle, setSelectedQuery } = useQuery();\r\n\r\n  useEffect(() => {\r\n    async function fetchMenuItems() {\r\n      try {\r\n        const response = await axios.get(\"/tree-view\");\r\n\r\n        const menuArray = [];\r\n        const queryArray = [];\r\n        const reportTitleArray = [];\r\n        const recNoArray = [];\r\n        const initRunArray = [];\r\n        const tabloTanimlariValues = Object.values(response.data);\r\n\r\n        for (let i = 0; i < tabloTanimlariValues.length; i++) {\r\n          //\r\n          let iteraty = response.data[i];\r\n          let menuAdi = Object.values(iteraty)[2];\r\n\r\n          menuArray.push(menuAdi); //MENU ADI\r\n          queryArray.push(Object.values(response.data[i])[6]); //SELECT SORGUSU\r\n          reportTitleArray.push(Object.values(response.data[i])[5]); //RAPOR BAŞLIK\r\n          recNoArray.push(Object.values(response.data[i])[0]); // RECNO\r\n          initRunArray.push(Object.values(response.data[i])[7]); // BAŞLANGIÇTA RAPOR ÇALIŞSIN MI\r\n        }\r\n        setMenuName(menuArray);\r\n        setQuery(queryArray);\r\n        setInitRun(initRunArray);\r\n        setRecNo(recNoArray);\r\n        setReportTitle(reportTitleArray);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch menu items: \", error);\r\n      }\r\n    }\r\n    fetchMenuItems();\r\n  }, []);\r\n\r\n  //BUTONA TIKLANINCA BU VERİLER DİĞER SAYFAYA POST EDİLİYOR\r\n  const handleClick = async (index) => {\r\n    //TODO SELECTED LARI SEÇİP POST ATARKEN ONLARI ARRAY HALİNDE ATMAK DAHA MANTIKLI İLK OLARAK QUERY'Yİ YAPACAĞIM İÇİN İŞLERİN HIZLI GİTMESİ BAKIMINDAN BEN VARİABLE KULLANICAM ŞİMDİLİK AMAÇLADIĞIM ŞEY BAŞARILI OLURSA BU KISIM ARRAY ŞEKLİNDE POST EDİLMELİ Kİ KOD KALABALIĞINDAN KURTULALALIM\r\n    const selectedReportTitle = reportTitle[index];\r\n    setSelectedReportTitle(selectedReportTitle);\r\n    const selectedQuery = query[index]; //BUG BURADA AKTARMAMIZ GEREKEN RECNO GİBİ DEĞERLERİ AKTARMADIK HALA REC NO KARŞI TARAFTA BİZE ÇOK İŞE YARICAK KAÇ KRİTER AÇACAĞIMIZ İLE İLGİLİ\r\n    setSelectedQuery(selectedQuery);\r\n\r\n    //const selectedQuery = query[index];\r\n    try {\r\n      await axios.post(\"/postQuery\", {\r\n        selectedQuery,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Hata\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>RAPORLAR</h1>\r\n      <ul>\r\n        {menuName.map((menuItem, index) => (\r\n          <li key={index}>\r\n            <Link\r\n              to={{\r\n                pathname: \"/report-page\",\r\n              }}\r\n              onClick={() => handleClick(index)}\r\n            >\r\n              {menuItem}\r\n            </Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TreeView;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1C,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAAE;AACxC,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC9C,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAAE;AACxC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC5C,KAAM,CAAEoB,sBAAsB,CAAEC,gBAAiB,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAE/DH,SAAS,CAAC,IAAM,CACd,cAAe,CAAAqB,cAAcA,CAAA,CAAG,CAC9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,YAAY,CAAC,CAE9C,KAAM,CAAAC,SAAS,CAAG,EAAE,CACpB,KAAM,CAAAC,UAAU,CAAG,EAAE,CACrB,KAAM,CAAAC,gBAAgB,CAAG,EAAE,CAC3B,KAAM,CAAAC,UAAU,CAAG,EAAE,CACrB,KAAM,CAAAC,YAAY,CAAG,EAAE,CACvB,KAAM,CAAAC,oBAAoB,CAAGC,MAAM,CAACC,MAAM,CAACT,QAAQ,CAACU,IAAI,CAAC,CAEzD,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGJ,oBAAoB,CAACK,MAAM,CAAED,CAAC,EAAE,CAAE,CACpD;AACA,GAAI,CAAAE,OAAO,CAAGb,QAAQ,CAACU,IAAI,CAACC,CAAC,CAAC,CAC9B,GAAI,CAAAG,OAAO,CAAGN,MAAM,CAACC,MAAM,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC,CAEvCX,SAAS,CAACa,IAAI,CAACD,OAAO,CAAC,CAAE;AACzBX,UAAU,CAACY,IAAI,CAACP,MAAM,CAACC,MAAM,CAACT,QAAQ,CAACU,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AACrDP,gBAAgB,CAACW,IAAI,CAACP,MAAM,CAACC,MAAM,CAACT,QAAQ,CAACU,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AAC3DN,UAAU,CAACU,IAAI,CAACP,MAAM,CAACC,MAAM,CAACT,QAAQ,CAACU,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AACrDL,YAAY,CAACS,IAAI,CAACP,MAAM,CAACC,MAAM,CAACT,QAAQ,CAACU,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;AACzD,CACAnB,WAAW,CAACU,SAAS,CAAC,CACtBR,QAAQ,CAACS,UAAU,CAAC,CACpBP,UAAU,CAACU,YAAY,CAAC,CACxBlB,QAAQ,CAACiB,UAAU,CAAC,CACpBf,cAAc,CAACc,gBAAgB,CAAC,CAClC,CAAE,MAAOY,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CACAjB,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAmB,WAAW,CAAG,KAAO,CAAAC,KAAK,EAAK,CACnC;AACA,KAAM,CAAAC,mBAAmB,CAAG/B,WAAW,CAAC8B,KAAK,CAAC,CAC9CtB,sBAAsB,CAACuB,mBAAmB,CAAC,CAC3C,KAAM,CAAAC,aAAa,CAAG5B,KAAK,CAAC0B,KAAK,CAAC,CAAE;AACpCrB,gBAAgB,CAACuB,aAAa,CAAC,CAE/B;AACA,GAAI,CACF,KAAM,CAAAzC,KAAK,CAAC0C,IAAI,CAAC,YAAY,CAAE,CAC7BD,aACF,CAAC,CAAC,CACJ,CAAE,MAAOL,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,MAAM,CAAEA,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,mBACE/B,KAAA,QAAAsC,QAAA,eACExC,IAAA,OAAAwC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxC,IAAA,OAAAwC,QAAA,CACGhC,QAAQ,CAACiC,GAAG,CAAC,CAACC,QAAQ,CAAEN,KAAK,gBAC5BpC,IAAA,OAAAwC,QAAA,cACExC,IAAA,CAACJ,IAAI,EACH+C,EAAE,CAAE,CACFC,QAAQ,CAAE,cACZ,CAAE,CACFC,OAAO,CAAEA,CAAA,GAAMV,WAAW,CAACC,KAAK,CAAE,CAAAI,QAAA,CAEjCE,QAAQ,CACL,CAAC,EARAN,KASL,CACL,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAEA,cAAe,CAAAjC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}