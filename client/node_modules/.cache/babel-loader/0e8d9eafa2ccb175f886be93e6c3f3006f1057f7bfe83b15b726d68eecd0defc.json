{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{useQuery}from\"./useContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TreeView(){const[menuName,setMenuName]=useState([]);const{setSelectedReportTitle,setSelectedQuery,setSelectedRecNo,setSelectedInitRun}=useQuery();useEffect(()=>{async function fetchMenuItems(){try{const response=await axios.get(\"/tree-view\");const menuArray=[];for(let i=0;i<response.data.length;i++){const{RecNo,MenuAdi,RaporBaslik,SelectSorgusu,BaslangictaRaporCalissinMi}=response.data[i];menuArray.push({recNo:RecNo,menuAdi:MenuAdi,raporBaslik:RaporBaslik,selectSorgusu:SelectSorgusu,baslangictaRaporCalissinMi:BaslangictaRaporCalissinMi});}setMenuName(menuArray);}catch(error){console.error(\"Failed to fetch menu items: \",error);}}fetchMenuItems();},[]);const handleClick=async(recNo,menuAdi,raporBaslik,selectSorgusu,baslangictaRaporCalissinMi)=>{const reportKey=\"report_\".concat(recNo);localStorage.setItem(reportKey,JSON.stringify({reportTitle:raporBaslik,query:selectSorgusu,recNo:recNo,initRun:baslangictaRaporCalissinMi}));setSelectedReportTitle(raporBaslik);setSelectedQuery(selectSorgusu);setSelectedRecNo(recNo);setSelectedInitRun(baslangictaRaporCalissinMi);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"RAPORLAR\"}),/*#__PURE__*/_jsx(\"ul\",{children:menuName.map((_ref,index)=>{let{recNo,menuAdi,raporBaslik,selectSorgusu,baslangictaRaporCalissinMi}=_ref;return/*#__PURE__*/_jsx(\"li\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/report-page\",onClick:()=>handleClick(recNo,menuAdi,raporBaslik,selectSorgusu,baslangictaRaporCalissinMi),className:\"block px-4 py-2 w-40 bg-blue-500 text-white rounded-md hover:bg-blue-600\",target:\"_blank\",children:menuAdi})},recNo);})})]});}export default TreeView;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useQuery","jsx","_jsx","jsxs","_jsxs","TreeView","menuName","setMenuName","setSelectedReportTitle","setSelectedQuery","setSelectedRecNo","setSelectedInitRun","fetchMenuItems","response","get","menuArray","i","data","length","RecNo","MenuAdi","RaporBaslik","SelectSorgusu","BaslangictaRaporCalissinMi","push","recNo","menuAdi","raporBaslik","selectSorgusu","baslangictaRaporCalissinMi","error","console","handleClick","reportKey","concat","localStorage","setItem","JSON","stringify","reportTitle","query","initRun","className","children","map","_ref","index","to","onClick","target"],"sources":["C:/Internship Project/client/src/pages/HomePage/treeView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useQuery } from \"./useContext\";\r\n\r\nfunction TreeView() {\r\n  const [menuName, setMenuName] = useState([]);\r\n  const {\r\n    setSelectedReportTitle,\r\n    setSelectedQuery,\r\n    setSelectedRecNo,\r\n    setSelectedInitRun,\r\n  } = useQuery();\r\n\r\n  useEffect(() => {\r\n    async function fetchMenuItems() {\r\n      try {\r\n        const response = await axios.get(\"/tree-view\");\r\n        const menuArray = [];\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          const {\r\n            RecNo,\r\n            MenuAdi,\r\n            RaporBaslik,\r\n            SelectSorgusu,\r\n            BaslangictaRaporCalissinMi,\r\n          } = response.data[i];\r\n          menuArray.push({\r\n            recNo: RecNo,\r\n            menuAdi: MenuAdi,\r\n            raporBaslik: RaporBaslik,\r\n            selectSorgusu: SelectSorgusu,\r\n            baslangictaRaporCalissinMi: BaslangictaRaporCalissinMi,\r\n          });\r\n        }\r\n        setMenuName(menuArray);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch menu items: \", error);\r\n      }\r\n    }\r\n    fetchMenuItems();\r\n  }, []);\r\n\r\n  const handleClick = async (\r\n    recNo,\r\n    menuAdi,\r\n    raporBaslik,\r\n    selectSorgusu,\r\n    baslangictaRaporCalissinMi\r\n  ) => {\r\n    const reportKey = `report_${recNo}`;\r\n    localStorage.setItem(\r\n      reportKey,\r\n      JSON.stringify({\r\n        reportTitle: raporBaslik,\r\n        query: selectSorgusu,\r\n        recNo: recNo,\r\n        initRun: baslangictaRaporCalissinMi,\r\n      })\r\n    );\r\n\r\n    setSelectedReportTitle(raporBaslik);\r\n    setSelectedQuery(selectSorgusu);\r\n    setSelectedRecNo(recNo);\r\n    setSelectedInitRun(baslangictaRaporCalissinMi);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 border rounded-lg shadow-md\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">RAPORLAR</h1>\r\n      <ul>\r\n        {menuName.map(\r\n          (\r\n            {\r\n              recNo,\r\n              menuAdi,\r\n              raporBaslik,\r\n              selectSorgusu,\r\n              baslangictaRaporCalissinMi,\r\n            },\r\n            index\r\n          ) => (\r\n            <li key={recNo} className=\"mb-2\">\r\n              <Link\r\n                to=\"/report-page\"\r\n                onClick={() =>\r\n                  handleClick(\r\n                    recNo,\r\n                    menuAdi,\r\n                    raporBaslik,\r\n                    selectSorgusu,\r\n                    baslangictaRaporCalissinMi\r\n                  )\r\n                }\r\n                className=\"block px-4 py-2 w-40 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\r\n                target=\"_blank\"\r\n              >\r\n                {menuAdi}\r\n              </Link>\r\n            </li>\r\n          )\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TreeView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}